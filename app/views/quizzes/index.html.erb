<% content_for :title, "My Quizzes" %>

<h1>My Quizzes</h1>

<table id="quizzes">
  <thead>
    <tr>
      <th>User</th>
      <th>Title</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @quizzes.each do |quiz| %>
      <%= render "quiz_row", quiz: quiz %>
    <% end %>
  </tbody>
</table>

<%= link_to "Create a new quiz", "#", id: "new-quiz-btn" %>

<style>
  #new-quiz-btn {
    display: inline-block;
    background-color: green;
    color: white;
    padding: 10px 20px;
    text-decoration: none;
    border-radius: 6px;
    font-weight: bold;
  }

  #new-quiz-btn:hover {
    background-color: darkgreen;
  }
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.getElementById("new-quiz-btn");
  btn.addEventListener("click", (e) => {
    e.preventDefault();

    let numQuestions = prompt("How many questions?");
    
    // If user presses cancel, exit without doing anything
    if (numQuestions === null) return;

    numQuestions = parseInt(numQuestions);
    if (!numQuestions || numQuestions < 1) return alert("Enter a valid number of questions.");

    // Redirect to new page with query param
    const url = new URL("<%= new_quiz_path %>", window.location.origin);
    url.searchParams.set("number_of_questions", numQuestions);
    window.location.href = url;
  });
});
</script>